{"version":3,"sources":["app.js","dateTimeService.js","aboutController.js","appointmentController.js","mainController.js","timepickerController.js"],"names":["angular","module","dnnApp","config","$routeProvider","when","templateUrl","controller","service","this","datetime","Date","getDateTime","setDateTime","dt","$scope","message","dateTimeService","vm","appointments","appointment","timestamp","title","text","date","loadAppointments","json","localStorage","getItem","data","JSON","parse","$on","console","log","createAppointment","moment","unix","time","hours","minutes","seconds","milliseconds","iso","toISOString","push","sortAppointments","stringify","setItem","resetAppointment","arr","sort","compareDates","a","b","aDate","bDate","deleteAppointment","i","length","splice","clamp","min","max","val","Math","setCube","len","Array","$log","hstep","mstep","ismeridian","changed","getRoundedDate","coeff","round","getTime","setTime"],"mappings":"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","file":"../script.js","sourcesContent":["\t// create the module and name it dnnApp\r\n\tangular.module('dnnApp', ['ngRoute', 'ui.bootstrap.timepicker', '720kb.datepicker']);\r\n\tvar dnnApp = angular.module('dnnApp');\r\n\t// configure our routes\r\n\tdnnApp.config(function($routeProvider) {\r\n\t\t$routeProvider\r\n\r\n\t\t\t// route for the appointment page\r\n\t\t\t.when('/', {\r\n\t\t\t\ttemplateUrl : 'pages/appointment.html',\r\n\t\t\t\tcontroller  : 'appointmentController'\r\n\t\t\t})\r\n\r\n\t\t\t// route for the about page\r\n\t\t\t.when('/about', {\r\n\t\t\t\ttemplateUrl : 'pages/about.html',\r\n\t\t\t\tcontroller  : 'aboutController'\r\n\t\t\t})\r\n\r\n\t});","dnnApp.service('dateTimeService', function() {\r\n    this.datetime = new Date();\r\n    this.getDateTime = function() {\r\n        return this.datetime;\r\n    };\r\n    this.setDateTime = function(dt) {\r\n        this.datetime = dt;\r\n        return this.datetime;\r\n    };\r\n  });","\tdnnApp.controller('aboutController', function($scope) {\r\n\t\t$scope.message = 'Contact us! JK. This is just a demo.';\r\n\t});","dnnApp.controller('appointmentController', ['$scope', 'dateTimeService', function($scope, dateTimeService) {\r\n  var vm = this;\r\n  vm.appointments = [];\r\n  vm.appointment = {};\r\n  vm.appointment.timestamp = null;\r\n  vm.appointment.title = '';\r\n  vm.appointment.text = ''; \r\n  vm.appointment.date = null; \r\n  $scope.date = new Date();\r\n\r\nvm.loadAppointments = function() {\r\n  var json = localStorage.getItem('appointments');\r\n    if (json == null || json == \"[]\"){\r\n      vm.appointments = [];\r\n      return;\r\n    }\r\n    var data = JSON.parse(json);\r\n    vm.appointments = data;\r\n}();\r\n\r\n$scope.$on('$viewContentLoaded', function() {\r\n    console.log(vm.appointments, \"viewContentLoaded\")\r\n});\r\n\r\n  vm.createAppointment = function() {\r\n    \r\n    vm.appointment.timestamp = moment().unix();\r\n    var date = moment($scope.date);\r\n    var time = dateTimeService.getDateTime();\r\n    time = moment(time);\r\n    var datetime = date;\r\n    datetime.hours(time.hours());\r\n    datetime.minutes(time.minutes());\r\n    datetime.seconds(time.seconds());\r\n    datetime.milliseconds(0);\r\n    var iso = moment(datetime).toISOString();\r\n    vm.appointment.date = iso;\r\n    console.log(vm.appointment, vm.appointments)\r\n    vm.appointments.push({\r\n      timestamp: vm.appointment.timestamp,\r\n      title: vm.appointment.title,\r\n      text: vm.appointment.text,\r\n      date: vm.appointment.date\r\n    });\r\n    vm.sortAppointments();\r\n    var json = JSON.stringify(vm.appointments);\r\n    localStorage.setItem('appointments', json);\r\n    vm.resetAppointment();\r\n}\r\n  \r\n  vm.resetAppointment = function() {\r\n    vm.appointment.timestamp = null;\r\n    vm.appointment.title = '';\r\n    vm.appointment.text = ''; \r\n    vm.appointment.date = null;\r\n    $scope.date = new Date();\r\n  }\r\n\r\n  vm.sortAppointments = function() {\r\n    var arr = vm.appointments;\r\n    arr.sort(vm.compareDates);\r\n    console.log(\"sorted\", arr);\r\n    vm.appointments = arr;\r\n    }\r\n    \r\n    vm.compareDates = function(a, b) {\r\n      aDate = new Date(a.date);\r\n      bDate = new Date(b.date);\r\n      if (aDate < bDate) return -1;\r\n      if (aDate > bDate) return 1;\r\n      return 0;\r\n    }\r\n\r\n  vm.deleteAppointment = function(i) {\r\n    if(!vm.appointments.length) vm.loadAppointments();\r\n    var arr = vm.appointments.splice(i, 1);\r\n    vm.sortAppointments();\r\n    var json = JSON.stringify(vm.appointments);\r\n    localStorage.setItem('appointments', json);\r\n  }\r\n\r\n  vm.clamp = function(min, max, val) {\r\n    return Math.max(min, Math.min(val, max));\r\n  }\r\n  \r\n  vm.setCube = function(len) {\r\n    var i = vm.clamp(0, 3, len-1);\r\n    return new Array(i);\r\n  }\r\n}]);\r\n","// create the controller and inject Angular's $scope\r\ndnnApp.controller('mainController', function($scope) {\r\n    $scope.message = 'Everyone come and see how good I look!';\r\n    // $scope.key = function($event){\r\n    //     console.log($event.keyCode);\r\n    //     if ($event.keyCode == 38)\r\n    //         console.log(\"up arrow\");\r\n    //     else if ($event.keyCode == 39)\r\n    //         console.log(\"right arrow\");\r\n    //     else if ($event.keyCode == 40)\r\n    //         console.log(\"down arrow\");\r\n    //     else if ($event.keyCode == 37)\r\n    //         console.log(\"left arrow\");\r\n    // }\r\n});","dnnApp.controller('AptTimepickerController', function ($scope, $log, dateTimeService) {\r\n  \r\n  $scope.hstep = 1;\r\n  $scope.mstep = 15;\r\n  $scope.ismeridian = true;\r\n  $scope.changed = function () {\r\n    $log.log('Time changed to: ' + $scope.time);\r\n  };\r\n\r\n  $scope.getRoundedDate = function(){\r\n    var coeff = 1000 * 60 * 15;\r\n    var date = new Date();  //or use any other date\r\n    return new Date(Math.round(date.getTime() / coeff) * coeff)\r\n  }\r\n  $scope.time = $scope.getRoundedDate();\r\n\r\n  $scope.setTime = function() {\r\n    dateTimeService.setDateTime($scope.time);\r\n  }\r\n});"]}