angular.module("dnnApp",["ngRoute","ui.bootstrap.timepicker","720kb.datepicker"]);var dnnApp=angular.module("dnnApp");dnnApp.constant("Constants",{Routes:{0:"/",1:"/add",2:"/about"},AnimateCube:{0:"show-front",1:"show-right",2:"show-back",3:"show-left",4:"show-top",5:"show-bottom"}}),dnnApp.config(function($routeProvider,Constants){$routeProvider.when(Constants.Routes[0],{templateUrl:"pages/appointments.html"}).when(Constants.Routes[1],{templateUrl:"pages/add.html"}).when(Constants.Routes[2],{templateUrl:"pages/about.html",controller:"aboutController"})});
dnnApp.service("animateCubeService",function(){this.keyCode=null,this.route="/",this.prevRoute="/",this.className="show-front",this.prevClassName="",this.getKeyCode=function(){return this.keyCode},this.setKeyCode=function(kc){return this.keyCode=kc,this.keyCode},this.getRoute=function(){return this.route},this.getPrevRoute=function(){return this.prevRoute},this.setRoute=function(r){return this.prevRoute=this.route,this.route=r,this.route},this.getClassName=function(){return this.className},this.setClassName=function(kc){return this.prevClassName=this.className,this.className=kc,this.className},this.getPrevClassName=function(){return this.prevClassName}});
dnnApp.service("dateTimeService",function(){this.datetime=new Date,this.getDateTime=function(){return this.datetime},this.setDateTime=function(dt){return this.datetime=dt,this.datetime}});
dnnApp.service("listService",function(){this.data=null,this.getData=function(){return this.data},this.setData=function(j){return this.json=j,this.data}});
dnnApp.directive("cubenav",["$rootScope","$location","animateCubeService","Constants",function($rootScope,$location,animateCubeService,Constants){function clampLoop(min,max,val){return val>max?min:val<min?max:val}return{link:function(scope,element){element.on("load",function(){console.log("load: "+$location.path())}),angular.element(element).on("keyup",function(){var route=animateCubeService.getRoute(),keyCode=(animateCubeService.getPrevRoute(),animateCubeService.getKeyCode());if(route==Constants.Routes[1])37!=keyCode&&39!=keyCode||(element.className="cube "+Constants.AnimateCube[4]),38!=keyCode&&40!=keyCode||(element.className="cube "+Constants.AnimateCube[0]);else if(route==Constants.Routes[2])37!=keyCode&&39!=keyCode&&38!=keyCode&&40!=keyCode||(element.className="cube "+Constants.AnimateCube[0]);else{if(37==keyCode||39==keyCode){var pos=2,loop=clampLoop(0,4,pos);element.className="cube "+Constants.AnimateCube[loop]}38==keyCode&&(element.className="cube "+Constants.AnimateCube[4]),40==keyCode&&(element.className="cube "+Constants.AnimateCube[5])}}),$rootScope.$on("$routeChangeSuccess",function(e,current,pre){console.log("routechange: "+$location.path()),animateCubeService.setRoute($location.path())})}}}]);
dnnApp.controller("aboutController",function($scope){$scope.message="Contact us! JK. This is just a demo."});
dnnApp.controller("appointmentController",["$scope","dateTimeService",function($scope,dateTimeService){var vm=this;vm.appointments=[],vm.appointment={},vm.appointment.timestamp=null,vm.appointment.title="",vm.appointment.text="",vm.appointment.date=null,$scope.date=new Date,vm.loadAppointments=function(){var json=localStorage.getItem("appointments");if(null==json||"[]"==json)return void(vm.appointments=[]);var data=JSON.parse(json);vm.appointments=data}(),vm.createAppointment=function(){vm.appointment.timestamp=moment().unix();var date=moment($scope.date),time=dateTimeService.getDateTime();time=moment(time);var datetime=date;datetime.hours(time.hours()),datetime.minutes(time.minutes()),datetime.seconds(time.seconds()),datetime.milliseconds(0);var iso=moment(datetime).toISOString();vm.appointment.date=iso,console.log(vm.appointment,vm.appointments),vm.appointments.push({timestamp:vm.appointment.timestamp,title:vm.appointment.title,text:vm.appointment.text,date:vm.appointment.date}),vm.sortAppointments();var json=JSON.stringify(vm.appointments);localStorage.setItem("appointments",json),vm.resetAppointment()},vm.resetAppointment=function(){vm.appointment.timestamp=null,vm.appointment.title="",vm.appointment.text="",vm.appointment.date=null,$scope.date=new Date},vm.sortAppointments=function(){var arr=vm.appointments;arr.sort(vm.compareDates),console.log("sorted",arr),vm.appointments=arr},vm.compareDates=function(a,b){return aDate=new Date(a.date),bDate=new Date(b.date),aDate<bDate?-1:aDate>bDate?1:0},vm.deleteAppointment=function(i){vm.appointments.length||vm.loadAppointments();vm.appointments.splice(i,1);vm.sortAppointments();var json=JSON.stringify(vm.appointments);localStorage.setItem("appointments",json)},vm.clamp=function(min,max,val){return Math.max(min,Math.min(val,max))},vm.setCube=function(len){var i=vm.clamp(0,3,len-1);return new Array(i)}}]);
dnnApp.controller("mainController",["$scope","animateCubeService",function($scope,animateCubeService){$scope.keyup=function($event){38!=$event.keyCode&&39!=$event.keyCode&&40!=$event.keyCode&&37!=$event.keyCode||animateCubeService.setKeyCode($event.keyCode)}}]);
dnnApp.controller("AptTimepickerController",function($scope,$log,dateTimeService){$scope.hstep=1,$scope.mstep=15,$scope.ismeridian=!0,$scope.changed=function(){$log.log("Time changed to: "+$scope.time)},$scope.getRoundedDate=function(){var coeff=9e5,date=new Date;return new Date(Math.round(date.getTime()/coeff)*coeff)},$scope.time=$scope.getRoundedDate(),$scope.setTime=function(){dateTimeService.setDateTime($scope.time)}});
//# sourceMappingURL=maps/script.js.map
